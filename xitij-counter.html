<link rel="import" href="bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<dom-module id="xitij-counter">

  <template>

    <style include="iron-flex iron-positioning"></style>

    <style>
      * {
        font-family: Roboto, serif;
      }

      #days, #hours, #minutes, #seconds {
        font-size: 120px;
      }

      .box {
        border: 2px solid black;
        margin: 10px;
        padding: 10px;
        transition: 1s ease;
      }

      .box > *:nth-child(1) {
        border-right: 2px solid black;
        padding-right: 10px;
      }

      .box > *:nth-child(2) {
        padding-left: 10px;
      }

    </style>

    <div class="layout horizontal center-justified">

      <div class="layout horizontal center box">
        <div id="days" class="flex-2">{{days}}</div>
        <div class="flex-1">Days</div>
      </div>
      <div class="layout horizontal center box">
        <div id="hours" class="flex-2">{{hours}}</div>
        <div class="flex-1">Hours</div>
      </div>
      <div class="layout horizontal center box">
        <div id="minutes" class="flex-2">{{minutes}}</div>
        <div class="flex-1">Minutes</div>
      </div>
      <div class="layout horizontal center box">
        <div id="seconds" class="flex-2">{{seconds}}</div>
        <div class="flex-1">Seconds</div>
      </div>

    </div>

  </template>

  <script>
    Polymer({
      is: 'xitij-counter',
      properties: {
        date: {
          type: String,
          value: "15",
          reflectToAttribute: true
        },
        month: {
          type: String,
          value: "9",
          reflectToAttribute: true
        },
        year: {
          type: String,
          value: "2016",
          reflectToAttribute: true
        },
      },
      attached: function () {
        this.eventDate = new Date(this.year, this.month - 1, this.date);
        this.timer = setInterval(this.tick.bind(this), 1000);
      },
      detached: function () {
        claerInterval(this.timer);
      },
      tick: function () {
        var diff = new Date(this.eventDate - new Date());
        this.days = diff.getDate();
        this.hours = diff.getHours();
        this.minutes = diff.getMinutes();
        this.seconds = diff.getSeconds();
      }
    });
  </script>

</dom-module>