<link rel="import" href="bower_components/iron-flex-layout/iron-flex-layout.html">

<dom-module id="xitij-counter">

  <template>

    <style>

      :host {
        display: block;
      }

      * {
        font-family: Roboto, serif;
      }

      #mainContainer {
        @apply(--layout-horizontal);
        @apply(--layout-center-justified);
      }

      #mainContainer > * {
        @apply(--layout-horizontal);
        @apply(--layout-center);
      }

      #daysValue {
        background-color: var(--paper-red-500);
      }

      #hoursValue {
        background-color: var(--paper-green-500);
      }

      #minutesValue {
        background-color: var(--paper-orange-500);
      }

      #secondsValue {
        background-color: var(--paper-indigo-500);
      }

      .circle {
        @apply(--layout-flex-2);
        font-size: 55px;
        border-radius: 50%;
        color: white;
        width: 1.2em;
        padding: 0.35em;
        margin: 0.2em;
        text-align: center;
      }

      .text {
        @apply(--layout-flex);
        color: var(--primary-color);
        font-size: 20px;
        margin-right: 0.1em;
      }

      @media (max-width: 725px) {

        .circle {
          font-size: 30px;
          @apply(--layout-flex-none);
        }

        #mainContainer {
          @apply(--layout-vertical);
          @apply(--layout-center);
        }

        #mainContainer > * {
          width: 160px;
        }

        .text {
          @apply(--layout-flex-none);
        }
      }

    </style>

    <div id="mainContainer">

      <div id="daysContainer">
        <div id="daysValue" class="circle">{{days}}</div>
        <div id="daysText" class="text">Days</div>
      </div>

      <div id="hoursContainer">
        <div id="hoursValue" class="circle">{{hours}}</div>
        <div id="hoursText" class="text">Hours</div>
      </div>

      <div id="minutesContainer">
        <div id="minutesValue" class="circle">{{minutes}}</div>
        <div id="minutesText" class="text">Minutes</div>
      </div>

      <div id="secondsContainer">
        <div id="secondsValue" class="circle">{{seconds}}</div>
        <div id="secondsText" class="text">Seconds</div>
      </div>

    </div>

  </template>

  <script>
    Polymer({
      is: 'xitij-counter',
      properties: {
        date: {
          type: String,
          value: "15",
          reflectToAttribute: true
        },
        month: {
          type: String,
          value: "9",
          reflectToAttribute: true
        },
        year: {
          type: String,
          value: "2016",
          reflectToAttribute: true
        }
      },
      attached: function () {
        this.eventDate = new Date(this.year, this.month - 1, this.date);
        this.tick();
        this.timer = setInterval(this.tick.bind(this), 1000);
      },
      detached: function () {
        claerInterval(this.timer);
      },
      tick: function () {
        var diff = new Date(this.eventDate - new Date());
        this.days = diff.getDate();
        this.hours = diff.getHours();
        this.minutes = diff.getMinutes();
        this.seconds = diff.getSeconds();
      }
    });
  </script>

</dom-module>